//to run file in terminal  --> node build_merkle_tree-for-token.js
const { MerkleTree } = require("merkletreejs");
const keccak256 = require("keccak256");
//for saving output
fs = require("fs");

//imoprtant for solidity proof should be in this format ["ddd", "aaaaa", "sssss", "sssss"]

//const tokens = require('./tokens.json');

let whitelistaddress = [
  "0xbFc016652a6708b20ae850Ee92D2Ea23ccA5F31a",
  "0xCaFE1b8CA4c8335ab543a42CaCB2E402d9C68a8D",
  "0x9fE7EF7863Cd81F95020ea95FB5198f85A48fa36",
  "0x1728345762cBC22D6F91A9C42B452324C2Ad5bd2",
  "0x8F3d7FfCe8c5Bc82a7F28c044cb6BfA057587D24",
  "0x578a2883be2aa767a8489E924A5C5286cfeb5462",
  "0x41238e4fc13ad5b2aa2cca906027bf6058a9fbd0",
  "0x0012241757b47cdF89C4f536822dE83e0DdA42Ad",
  "0x70a9c497536E98F2DbB7C66911700fe2b2550900",
  "0x9b47a47237670EcBbC04ba88F6f4D0ce754453b1",
  "0x7409E77a2aef2fe824Fe81cF55D441E5d0Df6749",
  "0x78FC3b88676761C66A0f687DF279b1Bb12FbF22d",
  "0xbcAe9454240181f92D2E5F60103Bdf3C2cF0cb42",
  "0x4b05E2448D99E01330a28c5E445e2a3Cf2D8bCee",
  "0xDbE55dAACE560A14f86210AfFC709eF5936196fD",
  "0xfFfF0FBc9938E3A52a9Df930cc79c0f3AE00Afe8",
  "0x2e7a40B2A29F3c9D8677DbD7E6D79291435bAe2F",
  "0x6084b60e83715F5F617dd86a332280950e5be06e",
  "0x81a2b00DC3D46fBd9A6eaCe82bC167f22Bf38087",
  "0x7bE74966867b552dd2CE1F09E71b1CA92C321Af0",
  "0xaf2AcEA6EC6B5411A66ebBc3A2526516048DFC35",
  "0xac0d880cfc60204F21B9189147D6929Ee268d92d",
  "0x86C563c896e7ad347bd17964749D31cf9fb1efd8",
  "0x059B8628B3b533b31bD62E67DA7168C2b4C2A25F",
  "0x04Ac7Ae4B26d26cEd9D1312EdfB71383368363CA",
  "0xEA4f445dc9e4Cf5CA72d79378337c889f8aD1a4e",
  "0xCDEdCee9C46284667997eB4D29f8427b696dA3df",
  "0x419869001780c72b57EAB83b8c944551D9c53740P",
  "0x97A11A9fC1dCE0B1dDc3ED01dFA7D71806d9C30A",
  "0x7354B835c24b7498A052a9Ca3e7aa6456930ef73",
  "0x5F8d030ccA16c7F83215Df3ECEc910e2a19C6b90",
  "0xf99bff640f8C09384629ECda3244DCA24B10B979",
  "0x8ed42E8e3a151E3854baB00d0e5CFf1cf7212B2e",
  "0x77E5A59B3992961001B0E84Dd76a3DE890B68bb0",
  "0xF6C0A0e00ea37610a044690cDF071d80d15678B1",
  "0xE4BfE59651E5d604c8E806E0E7Ec6677069E3389",
  "0x65694e1fa5DE473A09c70073f356A49e5caE3b38",
  "0x0bb34AeE5226997Cf58Caf857fea7B1a6151aFda",
  "0x6A45168375EE0c08E8EdE3e8Ce083240C7bf6516",
  "0x1C04481B1a7629c6Eb195A4Bfa02A89f88Fd138E",
  "0xDd2c7FA74BBB4Bf01E2a956Ad36A223c6BE4CB8C",
  "0xe11bF8c9d4FD0DEC48F0C8e54C7083f3fED8ee5C",
  "0x7FF7f2d7001C5dF483D828430e1e6B89B15cb9cA",
  "0xBB6Ba0F7195d4014eF21c2c8aC8568c390693374",
  "0xc5792957a26C7e917F09b84C665Ff4400F251C28",
  "0xEd24226381F5144562f0F50C69b7AbBAf5a2F093",
  "0x3B99E794378bD057F3AD7aEA9206fB6C01f3Ee60",
  "0x073D75003fB90e66f4757F97042f40576558344d",
  "0x62C0E99b6E55680fD234818e4C1f17bBa11F85c5",
  "0x91dD72D8E2f819eEcC3d4f6538e3AAD11d7D01Cd",
  "0xCE312e4d297FeD6c41630DffB6f0463710190A9E",
  "0x8D51A9Ddd59064F719D98b6a9B2f073811227c5e",
  "0x8A1b9625A4EFE47dBabE5DE133D1ECbBD48164b0",
  "0x8093beB541D3a70D87CB983986912c8c57E44a60",
  "0xe09Ba0853A040C83AEfb220df6E5EA8D298cEf53",
  "0x30A0ef025ab2d87942930d3698970Ef9C38ba687",
  "0xDDDd3d57eF272220920aCA14a8918296F923D3F3",
  "0xF6bfe967547841a670f2eBDb85fd9Ec2D9A7202f",
  "0x4E1b741F406d8eB1532D92aEbF05882FdAA2f574",
  "0x3f98bfFBCbAaD66707711B3E6D614AF310926549",
  "0x75Da3Aa34da5d51e5aAeb6030e697D243d3536AC",
  "0xB6034481d3E5f14c8deF1aC45ED3b993DafB4914",
  "0x052f102BADBfe233B998406B6Efd62dB8bDed0Cf",
  "0x62721B1fa0A100e8CFA2A72c893118e5Ce5b2D09",
  "0x0983BAB359bd8c793017dF035d920be0bAac2bEA",
  "0x0Fb4eD1ae7efd3B749d752c8cc913b8Ebe5fe060",
  "0x72C9f09F14B4c9309dC2c25b0d10FebfBEaB0Ebc",
  "0x1617000c89FdEC81eAc30D73D6D4D92175E14222",
  "0xE5b2f021abAFd77D6ef48290cfAC23b11D6Fa7Fc",
  "0x4015EbC542e705D621e66b03d1360Ed31332F4Ef",
  "0xCfd1f95C18cc2009fDD6ec6B3849C7C94A47C030",
  "0xA5EBE0f873335411aC1175033E729EBB2751CF62",
  "0x44D5C324D3643a91884D9830A4cD87f6BA0c1f22",
  "0x26a748E38114e9e195609954A55984203Ae8B32A",
  "0x2e403b969a64bdd1ca18fe10baba4546957bc31e",
  "0x61479137f48dE69BAc865864C2FE46B7d0A055cE",
  "0xee15FF07CeC2970D36739862b8524A6d2a57f355",
  "0xde7c91DD78Ee0dE4454131a463E45d737a146355",
  "0x36059211EFDc3A9ebDCfEfB400d317FEcBd39CC6",
  "0xb4171D730f3b476a61ac180Ee40546cC7Ab2ba37",
  "0x4b05E2448D99E01330a28c5E445e2a3Cf2D8bCee",
  "0x9d196a5da6181920A3ed2Ec046D8f73EA72bcB91",
  "0xc0d4F4e6D4aD91349CA85Dd392B9FcDB6cb52A64",
  "0xf2Eb1E6A6f9f9034c005124Ba9d32ffaa1AEa469",
  "0x968c7Fb6da5684c60FC4AFC5E993b502a0085DEE",
  "0x52E3c35d1A9421432613b600F0D6dc3B119dc786",
  "0x4a8e06b9d88fb63e83941dbccb2de7a64d03a43a",
  "0x279d9DBBd1603Fe6D460b220B1162d2737f849f7",
  "0x60B9e4B56E79B3D24C1d295a759d92303f44939D",
  "0x53FF05FB1a554759c99A6631ED5801948395D564",
  "0x4Cf4F7AA87587A4d5934e297a7DA69056561F33d",
  "0x89076ED8881B09020F9248332c300d27407f9f5a",
  "0x6a9388F818d4Db2A3826154130808718b9BF7a3f",
  "0x41c291A171ff09fE00B19B05Efe13bfB842361E7",
  "0x3840f4923265E512e5500a3974162A0a6Cb37E12",
  "0xdfAcbA80eC52529284ddca4A1155a8BEE1FF1d62",
  "0x460CF84AbC386A297c1C673B1581f8d9b8784A31",
  "0xEd24226381F5144562f0F50C69b7AbBAf5a2F093",
  "0x640bF77eb2c792B57E4e1e9AB9e7A7c4B32E1F12",
  "0x72C9f09F14B4c9309dC2c25b0d10FebfBEaB0Ebc",
  "8DBHDvhanGNJVZmLZvT749XvQKNUp7ER9c5fZtkc3joa",
  "0xb1b85193d48cb0fAa3741E4bA3A8EC6bD7287643",
  "0x5CB87F634d4e23f290eeD23Cae5EF5fe9663Fd5E",
  "0x48a4A9B3438e2a26E811535a682b4D77BE8e2D70",
  "0xf99bff640f8C09384629ECda3244DCA24B10B979",
  "0x26d747d536230762adcB130d542a752499cf2951",
  "0xc575905792D61eb3f08bECDF99E007cED4246040",
  "0xd341018EB6D3B8059059eE4B600F874456875c55",
  "0xC460D39B451a47d28a5F193cC20Ce27A4c03C30C",
  "0x7354B835c24b7498A052a9Ca3e7aa6456930ef73",
  "0xE5b2f021abAFd77D6ef48290cfAC23b11D6Fa7Fc",
  "0x6B861eAdb084C5d02DCA7c5a145210a076602175",
  "0xc0b627877a87c86A14F3b6371b7756262d68375b",
  "0x469a93178db9B7Aa2B768D42c9503350f849d59a",
  "0x80af9DE4736d041Bc88C08a955dA4DC17E9337c7",
  "0xe0d781cfA4009363b9F2dE0721E18793678da12E",
  "0x6941C343F3d66Be5F9F25474ED95Bd04ea90fA69",
  "0x493f89E90bCc7A8da4cF1fE0610FC395D91aA7F5",
  "0x46E8314465811F528163D6e01724D39d800B4509",
  "0x259542AF9d054BB7840F99277Aa44bDBa22ad942",
  "0xAc47494865066e971b56e7df0278bE202D875850",
  "0x99d406204d66A31c37F5529A8d3d866cCff18A74",
  "0x5294933183A74366C50aC78f35c9AC72B21bDd40",
  "0x50Fd64b464F85162B8e559F5765d8b6F4956fe2D",
  "0xB72195dd24E70460b408c16E3f3f512625504A12",
  "0x57d095DCb073e0D296c6B183ea751C72fb72B3db",
  "0x66CD2580a832B9Ae31220722E7a709837c168CDd",
  "0x7eF565554778De55b5e807b3BfEC02F240f7E3e5",
  "0x3BE22CB4d001BE91193D65f95D16fb554B0aa833",
  "0x54582396Cb2B32E9bCABbef4b7c32BE4ee086E00",
  "0x9cc6350863367dD2B14eBe10a073E004ca722e4B",
  "0x41FF8C2eF6E13af2e9b692a97174D64A55499E5C",
  "0x259542AF9d054BB7840F99277Aa44bDBa22ad942",
  "0xc14d1d58F7D40EB287eA898595dc0f6177765Db7",
  "0x56191Ce76B7fC1630d8286da09ed647451c558CA",
  "0x2c407D506882Bccf55409Ab632b10Ee97CEEc426",
  "0xe06b37206ABb46630e6123b71834F2a6741d1442",
  "0x0bd1E1EAFafB74Fb10CC461d4fC6e7f0A150FcBb",
  "0xf179cB7FC4D06ecf52997eE4C522db639F4521fd",
  "0x15eE41597dB2d111243b169aAf4D3Dd67B02ddba",
  "0xDbD4c0dD44D3Cb07A5F628E6E35ddF0f3e58aE99",
  "0x895Bd82aE141E6dbaD77Bff011A2Eb7485bD7802",
  "0x6941C343F3d66Be5F9F25474ED95Bd04ea90fA69",
  "0xD4EE23f1Ab2a5b56B1Ea7F86dd41b2513376aA6B",
  "0x9CE001fE985b2AAc2E594163b5BCb82b99D094e1",
  "0x16C33755DE6849ac72627C14B0FfA8c3640E0043",
  "0x7B3c6cE295fd80D733292A8B3C504E8E7Bc7b407",
  "0xc0b627877a87c86A14F3b6371b7756262d68375b",
  "0x41238e4fc13ad5b2aa2cca906027bf6058a9fbd0",
  "0x82788d66994484Cd3bAeE1857706Dc8abf6666BD",
  "0x6daD04e5AD7C55A1CbC06407FA6507B4ec0af29b",
  "0x99d406204d66A31c37F5529A8d3d866cCff18A74",
  "0x0BF755EDe25329b428BF4403e84DEe3AA61903fe",
  "0xCc443a8049043B9402EaE91DB48116A1f580A3E3",
  "0x578a2883be2aa767a8489E924A5C5286cfeb5462",
  "0x21e809771F751938a3e96f9082aA05FdD0ecaA86",
  "0x7354B835c24b7498A052a9Ca3e7aa6456930ef73",
  "0xA3447da1B58de4D7fE32d75de5DA6be21Ea0b14a",
  "0x344C49fECFa1aBE9301C61c682b46927CFe7aF83",
  "0xDd2c7FA74BBB4Bf01E2a956Ad36A223c6BE4CB8C",
  "0xfB8eb7524Ea695398912bDd61e80044400af0a4f",
  "0xB72195dd24E70460b408c16E3f3f512625504A12",
  "0x80af9DE4736d041Bc88C08a955dA4DC17E9337c7",
  "0x6006A72cfB06AA533B5Ba2E15Af849434AcDe68b",
  "0xa0806c7A6d5A5B7597Dea488c948353263D3147f",
  "0x86ef509ac71F03F2C39B1B0D07beDc4c3F36d288",
  "0xde399e8B2Db442e719484D7EaEC0f2DefEb05731",
  "0xD5209D1320B10594818DD25aa10F5C8fC3f66DbC",
  "0x8B611A0747F714f657C0a8575f877Ec5AD9189D0",
  "0xE694CEeaF4A0d377655A322EB89D2D2938f0EFc5",
  "0x5629B2A346A466c0D07cBDCfEcdb6a3bb7d68ca5",
  "0x364934F199113f2d5186Ed1fCbc6cc7Ceb2c8561",
  "0xCc443a8049043B9402EaE91DB48116A1f580A3E3",
  "0x498B8854A39a9154057b49e34B6a2049c9E7e480",
  "0x34625c0670C6530616bc80006BcC7d838A906BEf",
  "0x283A79A48F4E92d951551E7386eD06C6e10D9024",
  "0x77777c02952Cb0925600BfdF26422a7073dFDF91",
  "0xEbc636778eb5cC374b7D47420151ED90dC07e506",
  "0x00059Ff7a2c19aAec09E46bd662561938c3Cf651",
  "0x366a12769D394F60Fd272f8E105F0DE9426B5ef1",
  "0xAb8483F64d9C6d1EcF9b849Ae677dD3315835cb2",
];

const leaves = whitelistaddress.map((addr) => keccak256(addr));
const tree = new MerkleTree(leaves, keccak256, { sortPairs: true });
const root = tree.getHexRoot(); //to add 0x beofre merkleroot

//check our tree
console.log("Our Merkle tree:\n", tree.toString());
console.log("Merkle tree root:\n", root);

const leaf = keccak256("0xAb8483F64d9C6d1EcF9b849Ae677dD3315835cb2");
const proof = tree.getHexProof(leaf);
console.log(tree.verify(proof, leaf, root)); // true

// const proof2 = tree.getHexProof(leaves[0]);
// console.log(proof2);

// console.log(proof);

//export csv
let treeroot = "";
let text = "";

for (let i in leaves) {
  const proof = tree.getHexProof(leaves[i]);
  console.log("address", whitelistaddress[i], "\n", "proof", proof, "\n");
  text +=
    "address: " + whitelistaddress[i] + "\n " + "proof:" + proof + "\n\n ";
}

// file saved in same folder as script
fs.writeFile("proofs.txt", text, function (err) {
  if (err) return console.log(err);
  console.log("Export proofs succeeded");
});

fs.writeFile("root.txt", root, function (err) {
  if (err) return console.log(err);
  console.log("Export tree root succeeded");
});
